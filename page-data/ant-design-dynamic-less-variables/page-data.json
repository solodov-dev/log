{"componentChunkName":"component---src-templates-log-post-jsx","path":"/ant-design-dynamic-less-variables/","result":{"data":{"markdownRemark":{"html":"<ol>\n<li>Install dependencies</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i -D antd-theme-webpack-plugin babel-plugin-import customize-cra <span class=\"token function\">less</span> less-loader react-app-rewired</code></pre></div>\n<ol start=\"2\">\n<li>Create config-overrides.js (same level as package.json)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  override<span class=\"token punctuation\">,</span>\n  fixBabelImports<span class=\"token punctuation\">,</span>\n  addLessLoader<span class=\"token punctuation\">,</span>\n  addWebpackPlugin<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'customize-cra'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> AntDesignThemePlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'antd-theme-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  stylesDir<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  antDir<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./node_modules/antd'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  varFile<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./src/styles/vars.less'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  themeVariables<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'@primary-color'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  lessUrl<span class=\"token operator\">:</span> <span class=\"token string\">'https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.min.js'</span><span class=\"token punctuation\">,</span>\n  indexFileName<span class=\"token operator\">:</span> <span class=\"token string\">'index.html'</span><span class=\"token punctuation\">,</span>\n  generateOnce<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// generate color.less on each compilation</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">override</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">fixBabelImports</span><span class=\"token punctuation\">(</span><span class=\"token string\">'import'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    libraryName<span class=\"token operator\">:</span> <span class=\"token string\">'antd'</span><span class=\"token punctuation\">,</span>\n    libraryDirectory<span class=\"token operator\">:</span> <span class=\"token string\">'es'</span><span class=\"token punctuation\">,</span>\n    style<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">addWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">AntDesignThemePlugin</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">addLessLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    lessOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      javascriptEnabled<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"3\">\n<li>In your index.html</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  window<span class=\"token punctuation\">.</span>less <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> async<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> env<span class=\"token operator\">:</span> <span class=\"token string\">'production'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span>\n  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.min.js<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ol start=\"4\">\n<li>Create src/styles/vars.less file</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"less\"><pre class=\"language-less\"><code class=\"language-less\"><span class=\"token variable\">@import</span> <span class=\"token string\">'~antd/lib/style/themes/default.less'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">@primary-color<span class=\"token punctuation\">:</span></span> #dada<span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"5\">\n<li>Now you can change less variables in your code</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token punctuation\">(</span>window <span class=\"token keyword\">as</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>less<span class=\"token punctuation\">.</span><span class=\"token function\">modifyVars</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">'@primary-color'</span><span class=\"token operator\">:</span> <span class=\"token function\">getRequiredEnv</span><span class=\"token punctuation\">(</span><span class=\"token string\">'REACT_APP_PRIMARY_COLOR'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Ant-design dynamic less variables","date":"sep 19, 2020","tags":["ant-design","less","css variables"]}}},"pageContext":{"slug":"/ant-design-dynamic-less-variables/"}},"staticQueryHashes":[]}